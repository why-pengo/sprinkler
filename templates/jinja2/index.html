{% extends "base.html" %}
{% block content %}

<div class="container-fluid">
    <div class="container mt-2 mx-0">
        <div class="row">

            <div class="col-sm">
                <div class="bg-white rounded-lg m-1 zonebox">
                    <div class="row mr-0 ml-0">
                        <div class="col-4">
                            <div class="container text-black my-2">
                                <h3>Zone 1</h3>
                            </div>
                            <div class="container">
                                <br />
                                <form>
                                    <div class="form-group">
                                        <label class="switch">
                                            <input type="checkbox" name="zone" value="1">
                                            <span class="slider round"></span>
                                        </label>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div id="zone1" class="container col-7 mt-1 mb-1 bg-dark text-light rounded-lg"
                             style="font-family: digital-led-font; font-size: small;">Message display</div>
                    </div>
                </div>
            </div>
            <div class="col-sm">
                <div class="bg-white rounded-lg m-1 zonebox">
                    <div class="row mr-0 ml-0">
                        <div class="col-4">
                            <div class="container text-black my-2">
                                <h3>Zone 2</h3>
                            </div>
                            <div class="container">
                                <br />
                                <form>
                                    <div class="form-group">
                                        <label class="switch">
                                            <input type="checkbox" name="zone" value="2">
                                            <span class="slider round"></span>
                                        </label>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div id="zone2" class="container col-7 mt-1 mb-1 bg-dark text-light rounded-lg"
                             style="font-family: digital-led-font; font-size: small;">Message display</div>
                    </div>
                </div>
            </div>

        </div>
        <div class="row">

            <div class="col-sm">
                <div class="bg-white rounded-lg m-1 zonebox">
                    <div class="row mr-0 ml-0">
                        <div class="col-4">
                            <div class="container text-black my-2">
                                <h3>Zone 3</h3>
                            </div>
                            <div class="container">
                                <br />
                                <form>
                                    <div class="form-group">
                                        <label class="switch">
                                            <input type="checkbox" name="zone" value="3">
                                            <span class="slider round"></span>
                                        </label>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div id="zone3" class="container col-7 mt-1 mb-1 bg-dark text-light rounded-lg"
                             style="font-family: digital-led-font; font-size: small;">Message display</div>
                    </div>
                </div>
            </div>
            <div class="col-sm">
                <div class="bg-white rounded-lg m-1 zonebox">
                    <div class="row mr-0 ml-0">
                        <div class="col-4">
                            <div class="container text-black my-2">
                                <h3>Zone 4</h3>
                            </div>
                            <div class="container">
                                <br />
                                <form>
                                    <div class="form-group">
                                        <label class="switch">
                                            <input type="checkbox" name="zone" value="4">
                                            <span class="slider round"></span>
                                        </label>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div id="zone4" class="container col-7 mt-1 mb-1 bg-dark text-light rounded-lg"
                             style="font-family: digital-led-font; font-size: small;">Message display</div>
                    </div>
                </div>
            </div>

        </div>
        <div class="row">

            <div class="col-sm">
                <div class="bg-white rounded-lg m-1 zonebox">
                    <div class="row mr-0 ml-0">
                        <div class="col-4">
                            <div class="container text-black my-2">
                                <h3>Zone 5</h3>
                            </div>
                            <div class="container">
                                <br />
                                <form>
                                    <div class="form-group">
                                        <label class="switch">
                                            <input type="checkbox" name="zone" value="5">
                                            <span class="slider round"></span>
                                        </label>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div id="zone5" class="container col-7 mt-1 mb-1 bg-dark text-light rounded-lg"
                             style="font-family: digital-led-font; font-size: small;">Message display</div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
<div class="row bg-light rounded-lg m-3" id="div1"></div>

<script>
    $(document).ready(function(){
        $('input:checkbox').click(function() {
            let checked = $(this).prop('checked');
            console.log(`zone = ${this.value}, checked = ${checked}`);
            if (checked === false) {
                const url = `/zone_off/${this.value}`;
                $.ajax(
                    {
                        url: url, success: function(result){
                            $("#div1").html(`<p>${result}</p>`);
                            console.log(`call to ${url} result = ${result}`);
                        }
                    }
                );
            } else {
                $('input:checkbox').not(this).prop('checked', false);
                const url = `/zone_on/${this.value}`;
                $.ajax(
                    {
                        url: url, success: function(result){
                            $("#div1").html(`<p>zoneOn = ${result.zoneOn}, timestamp = ${result.timestamp}</p>`);
                            let selector = $(`#zone${result.zoneOn}`);
                            selector.html(`<p>zoneOn = ${result.zoneOn}, timestamp = ${result.timestamp}</p>`);
                            console.log(`call to ${url} result = ${result}`);
                        }
                    }
                );
            }
        });
    });
</script>
{% endblock %}
